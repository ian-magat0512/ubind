// <auto-generated />
#pragma warning disable 1591

namespace UBind.Persistence.Migrations
{
    using System;
    using System.Data.Entity.Migrations;

    /// <summary>
    /// Added the "SessionExpiryMode" field to the TenantDetails so that we can store different methods of 
    /// Session expiry and switch between them without losing settings. It also fixes a bug where if both are
    /// set, the first one is always used, even if the customer chooses to use the second one.
    /// </summary>
    public partial class AddSessionExpiryModeToTenant : DbMigration
    {
        public override void Up()
        {
            AddColumn("dbo.TenantDetails", "SessionExpiryMode", c => c.Int(nullable: false, defaultValue: 0));
            Sql("UPDATE dbo.TenantDetails SET SessionExpiryMode = 1"
                + " WHERE IdleTimeoutPeriodType IS NOT NULL"
                + " AND IdleTimeoutPeriodType != ''");
        }

        public override void Down()
        {
            DropColumn("dbo.TenantDetails", "SessionExpiryMode");
        }
    }
}
