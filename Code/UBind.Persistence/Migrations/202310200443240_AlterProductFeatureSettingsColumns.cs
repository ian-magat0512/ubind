// <auto-generated />
#pragma warning disable 1591

namespace UBind.Persistence.Migrations
{
    using System.Data.Entity.Migrations;
    using UBind.Persistence.Helpers;
    using UBind.Persistence.Migrations.Extensions;

    public partial class AlterProductFeatureSettingsColumns : DbMigration
    {
        private const string DropColumnsForProductFeatureSettingsStartupJobAlias = "DropColumnsForProductFeatureSettings_20231005";

        public override void Up()
        {
            this.AddColumn("dbo.ProductFeatureSettings", "AreNewBusinessQuotesEnabled", c => c.Boolean(nullable: false));
            this.AddColumn("dbo.ProductFeatureSettings", "AreAdjustmentQuotesEnabled", c => c.Boolean(nullable: false));
            this.AddColumn("dbo.ProductFeatureSettings", "AreCancellationQuotesEnabled", c => c.Boolean(nullable: false));
            this.AddColumn("dbo.ProductFeatureSettings", "AreRenewalQuotesEnabled", c => c.Boolean(nullable: false));
            this.AddColumn("dbo.ProductFeatureSettings", "AreNewBusinessPolicyTransactionsEnabled", c => c.Boolean(nullable: false));
            this.AddColumn("dbo.ProductFeatureSettings", "AreAdjustmentPolicyTransactionsEnabled", c => c.Boolean(nullable: false));
            this.AddColumn("dbo.ProductFeatureSettings", "AreCancellationPolicyTransactionsEnabled", c => c.Boolean(nullable: false));
            this.AddColumn("dbo.ProductFeatureSettings", "AreRenewalPolicyTransactionsEnabled", c => c.Boolean(nullable: false));
            this.AlterColumn("dbo.ProductFeatureSettings", "IsPurchaseEnabled", c => c.Boolean(nullable: false, defaultValue: false));
            this.AlterColumn("dbo.ProductFeatureSettings", "IsAdjustmentEnabled", c => c.Boolean(nullable: false, defaultValue: false));
            this.AlterColumn("dbo.ProductFeatureSettings", "IsCancellationEnabled", c => c.Boolean(nullable: false, defaultValue: false));
            this.AlterColumn("dbo.ProductFeatureSettings", "IsRenewalEnabled", c => c.Boolean(nullable: false, defaultValue: false));
            this.Sql("UPDATE [dbo].[ProductFeatureSettings]"
                + "SET [AreNewBusinessQuotesEnabled] = [IsPurchaseEnabled],"
                + "[AreAdjustmentQuotesEnabled] = [IsAdjustmentEnabled],"
                + "[AreCancellationQuotesEnabled] = [IsCancellationEnabled],"
                + "[AreRenewalQuotesEnabled] = [IsRenewalEnabled]");
            this.Sql(
                StartupJobRunnerQueryHelper.GenerateInsertQueryForStartupJob(
                    DropColumnsForProductFeatureSettingsStartupJobAlias, runManuallyIfInMultiNode: true));
        }
        
        public override void Down()
        {
            this.AddColumnIfNotExists("dbo.ProductFeatureSettings", "IsRenewalEnabled", c => c.Boolean(nullable: false));
            this.AddColumnIfNotExists("dbo.ProductFeatureSettings", "IsCancellationEnabled", c => c.Boolean(nullable: false));
            this.AddColumnIfNotExists("dbo.ProductFeatureSettings", "IsAdjustmentEnabled", c => c.Boolean(nullable: false));
            this.AddColumnIfNotExists("dbo.ProductFeatureSettings", "IsPurchaseEnabled", c => c.Boolean(nullable: false));
            this.DropColumn("dbo.ProductFeatureSettings", "AreNewBusinessQuotesEnabled");
            this.DropColumn("dbo.ProductFeatureSettings", "AreAdjustmentQuotesEnabled");
            this.DropColumn("dbo.ProductFeatureSettings", "AreCancellationQuotesEnabled");
            this.DropColumn("dbo.ProductFeatureSettings", "AreRenewalQuotesEnabled");
            this.DropColumn("dbo.ProductFeatureSettings", "AreNewBusinessPolicyTransactionsEnabled");
            this.DropColumn("dbo.ProductFeatureSettings", "AreAdjustmentPolicyTransactionsEnabled");
            this.DropColumn("dbo.ProductFeatureSettings", "AreCancellationPolicyTransactionsEnabled");
            this.DropColumn("dbo.ProductFeatureSettings", "AreRenewalPolicyTransactionsEnabled");
            this.Sql(
                StartupJobRunnerQueryHelper.GenerateDeleteQueryForStartupJob(
                    DropColumnsForProductFeatureSettingsStartupJobAlias));
        }
    }
}
